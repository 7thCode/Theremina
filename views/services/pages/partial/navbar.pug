nav.navbar.navbar-fixed-top.navbar-color(role="navigation")
    .container-fluid
        .navbar-header
            button.btn-primary.navbar-toggle.collapsed(type='button', data-toggle='collapse', data-target='#bs-navbar')
                span.sr-only Toggle navigation
                span.icon-bar
                span.icon-bar
                span.icon-bar
            a.navbar-brand.page-scroll.brand-font-local(href="/", ng-click="go('/')") #{message.brand}
        #bs-navbar.navbar-collapse.collapse
            ul.nav.navbar-nav
                if user
                    li.dropdown
                        a.dropdown-toggle(href='#', data-toggle='dropdown', role='button', aria-haspopup='true', aria-expanded='false')
                            | #{message.files}
                        ul.dropdown-menu(role="menu")
                            li
                                a(href="#", ng-click="BuildSite();", role="menuitem") #{message.newsite}
                            li
                                a(href="#", ng-click="Create();", role="menuitem") #{message.create}
                            //li
                                a(href="", ng-click="Open();") 開く...
                            li(ng-class="{disabled: !opened}")
                                a(href="", ng-click="opened && Update();", role="menuitem") #{message.save}
                            li.divider
                            li(ng-class="{disabled: !opened}" )
                                a(href="", ng-click="opened && Delete();", role="menuitem") #{message.delete}
                    li.dropdown(ng-class="{disabled: !opened}")
                        a.dropdown-toggle(href='#', data-toggle='dropdown', role='button', aria-haspopup='true', aria-expanded='false')
                            | #{message.edit}
                        ul.dropdown-menu(role="menu")
                            li
                                a(href="#", ng-click="Undo();", role="menuitem") #{message.undo}

                    li.dropdown(ng-class="{disabled: !opened}")
                        a.dropdown-toggle(href='#', data-toggle='dropdown', role='button', aria-haspopup='true', aria-expanded='false')
                            | #{message.template}
                        ul.dropdown-menu(role="menu")
                            li(ng-repeat="template in templates")
                                a(href="#", ng-click="Paste(template._id);", role="menuitem") {{template.name}}
                            li.divider

                    li.dropdown(ng-class="{disabled: opened}", ng-controller="NamespaceController")
                        a.dropdown-toggle(href='#', data-toggle='dropdown', role='button', aria-haspopup='true', aria-expanded='false')
                            | #{message.namespace} - {{namespace}} &nbsp;
                            i.fa.fa-caret-down(aria-hidden="true")
                        ul.dropdown-menu(role="menu")
                            li(ng-repeat="name in namespaces" ng-class="{active: name == namespace}")
                                a(ng-click="SetNamespace(name)") {{name}}

                    //li.dropdown(ng-class="{disabled: !opened}")
                        a.dropdown-toggle(href='#', data-toggle='dropdown', role='button', aria-haspopup='true', aria-expanded='false')
                            | #{message.preview}
                        ul.dropdown-menu(role="menu")
                            li
                                a(href="#", ng-click="OpenPreview();", role="menuitem") #{message.open}